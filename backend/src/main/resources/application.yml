# =============================================================================
# Rewine Backend - Application Configuration (Common Defaults)
# =============================================================================
# Profile-specific configuration:
#   - local: PostgreSQL for local development (default)
#   - test: H2 in-memory for unit tests
#   - integration: Testcontainers PostgreSQL
#   - production: Production PostgreSQL
# =============================================================================

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}

  application:
    name: rewine-backend
    version: 0.0.1-SNAPSHOT

  # Common Jackson Configuration
  jackson:
    default-property-inclusion: non_null
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false
    time-zone: UTC

# Server Configuration
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /api/v1
  shutdown: graceful

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,env,loggers
      base-path: /actuator
  endpoint:
    health:
      show-details: when_authorized
      probes:
        enabled: true
      group:
        readiness:
          include: readinessState,db
        liveness:
          include: livenessState
    info:
      enabled: true
    metrics:
      enabled: true
    env:
      enabled: true
    loggers:
      enabled: true
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true
    db:
      enabled: true

# Application Info
info:
  app:
    name: ${spring.application.name}
    version: ${spring.application.version}
    description: Wine Discovery Platform - Backend API

# API Contact Configuration
api:
  contact:
    name: Rewine Team
    email: support@rewine.com

# Logging Configuration (common defaults)
logging:
  level:
    root: INFO
    com.rewine: ${LOG_LEVEL_APP:INFO}
    org.springframework.security: INFO
    org.hibernate.SQL: ${LOG_LEVEL_SQL:WARN}
    org.flywaydb: INFO

# OpenAPI Configuration
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method
    tagsSorter: alpha
    displayRequestDuration: true
    filter: true
    url: /api-docs
    disable-swagger-default-url: true
  show-actuator: false
  packages-to-scan: com.rewine.backend.controller
  paths-to-match: /**
  paths-to-exclude: /actuator/**

# JWT Configuration
jwt:
  issuer: ${JWT_ISSUER:rewine-backend}
  secret: ${JWT_SECRET:rewine-development-secret-key-change-in-production-minimum-256-bits}
  access-token-expiration: ${JWT_ACCESS_EXPIRATION:900000}    # 15 minutes in milliseconds
  refresh-token-expiration: ${JWT_REFRESH_EXPIRATION:604800000} # 7 days in milliseconds

# CORS Configuration
cors:
  allowed-origins: ${CORS_ORIGINS:http://localhost:3000,http://localhost:4173,http://localhost:5173}
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS
  allowed-headers: "*"
  allow-credentials: true

# AI Configuration
rewine:
  ai:
    provider: ${AI_PROVIDER:mock}  # Options: mock, openai (openai requires additional config)

